<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Challenge accepted</title>
    <link href="task2.css" rel="stylesheet">
  </head>
  <body onmousemove="mousePos(event)" id="body">
    <div class="button-container">
      <div class="button" id="button-1" onclick="createShape(event); buttonWaits2()">Show</div>
      <div class="button" id="button-2" onclick="removeShape(event)">Reset</div>
    </div>
    <canvas id="myCanvas" width="2000px" height="2000px"></canvas>
  </body>

  <script>
    //two arrays: one that stores mouse tracking (single session), another that stores every session. not using the second one atm.
    const posArrayMain = [];
    const posArray = [];
    const colors = ["blue", "green", "red", "black", "white"];
    var lineCount = 0;
    const currentColor = colors[lineCount];

    //button wait function - initial state
    const buttonWaitTime = 1000 + Math.floor(Math.random() * 3000);
    const buttonTimeOut = setTimeout(function() {
      var button1 = document.querySelector("#button-1");
      button1.style.backgroundColor="black";
    }, buttonWaitTime);
    
    //button wait function - recurring state
    function buttonWaits2() {
      var button1 = document.querySelector("#button-1");
      button1.style.backgroundColor = "darkgray";
      const buttonWaitTime = 1000 + Math.floor(Math.random() * 3000);
      const buttonTimeOut = setTimeout(function(){
        document.querySelector("#button-1").style.backgroundColor="black";
      }, buttonWaitTime);
    }

    //gets mouse position
    function mousePos(event) {
      var px = event.clientX;
      var py = event.clientY;
      posArray.push(px, py);
      return (px, py);
    }

    //creates a canvas, stylizes line. loops through two arrays to draw lines. 
    function createShape(event) {
      var c = document.getElementById("myCanvas");
      var ctx = c.getContext("2d");
      ctx.lineWidth = 10;
      lineCount++;
      ctx.strokeStyle = colors[lineCount % 5];
      posArrayMain.push(posArray);
      for (var j = 0; j < posArrayMain.length; j++) {
        for (var i = 0; i < posArrayMain[j].length/2; i++) {
          ctx.beginPath();
          ctx.moveTo(posArrayMain[j][2*i], posArrayMain[j][2*i+1]);
          ctx.lineTo(posArrayMain[j][2+2*i], posArrayMain[j][2+2*i+1]);
          ctx.stroke();
        }
      }

    }
    //clears canvas.
    function removeShape(event) {
      location.reload();
    }

  </script>

</html>